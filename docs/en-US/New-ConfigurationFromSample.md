---
external help file: PSTestableData-help.xml
Module Name: PSTestableData
online version:
schema: 2.0.0
---

# New-ConfigurationFromSample

## SYNOPSIS
Analyzes an object and creates a configuration template for data generation.

## SYNTAX

```
New-ConfigurationFromSample [-SampleObject] <Object> [[-DefaultAction] <String>] [[-DefaultArrayCount] <Int32>]
 [[-AnonymizePatterns] <String[]>] [[-MaxDepth] <Int32>] [[-OutputPath] <String>] [-PassThru]
 [-ProgressAction <ActionPreference>] [<CommonParameters>]
```

## DESCRIPTION
This function takes a sample object and generates a configuration structure that can be
used to control how data is generated by data generation functions.
The configuration
maps every field in the object with an Action property that determines how the field
should be handled: Preserve (keep original), Anonymize (scramble while preserving format),
or Randomize (generate new random value).

The output configuration is designed to be easily edited by users to customize how each
field should be handled during data generation.

## EXAMPLES

### EXAMPLE 1
```
$sample = @{
    name = "John Doe"
    age = 30
    items = @("item1", "item2")
}
$config = New-ConfigurationFromSample -SampleObject $sample
```

Generates a configuration template for the sample object.

### EXAMPLE 2
```
$yamlData = ConvertFrom-Yaml $yamlString
$config = New-ConfigurationFromSample -SampleObject $yamlData -DefaultAction 'Anonymize' -AnonymizePatterns @('*.uid', '*.secret')
```

Generates a configuration with all fields defaulting to Anonymize action, with specific patterns for sensitive fields.

### EXAMPLE 3
```
$sample | New-ConfigurationFromSample -OutputPath '.\config.ps1'
```

Saves the configuration to a file.
Later you can load it with: .
.\config.ps1
The configuration is available in the $Config variable.

### EXAMPLE 4
```
$config = $sample | New-ConfigurationFromSample -OutputPath '.\config.ps1' -PassThru
```

Saves the configuration to a file and also returns it to the pipeline.

## PARAMETERS

### -SampleObject
The sample object to analyze and create a configuration from.
Can be hashtables,
PSCustomObjects, arrays, or any structured data.

```yaml
Type: Object
Parameter Sets: (All)
Aliases:

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByValue)
Accept wildcard characters: False
```

### -DefaultAction
Default action for all fields.
Valid values: 'Preserve', 'Anonymize', 'Randomize'.
Default is 'Preserve'.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 2
Default value: Preserve
Accept pipeline input: False
Accept wildcard characters: False
```

### -DefaultArrayCount
Default number of items to generate for arrays.
Default is 3.

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 3
Default value: 3
Accept pipeline input: False
Accept wildcard characters: False
```

### -AnonymizePatterns
Array of field path patterns that should default to Action = 'Anonymize'.
Supports wildcards.
Examples: 'password', 'email', '*.secret'

```yaml
Type: String[]
Parameter Sets: (All)
Aliases:

Required: False
Position: 4
Default value: @()
Accept pipeline input: False
Accept wildcard characters: False
```

### -MaxDepth
Maximum depth for recursion when analyzing nested structures.
Default is 10.

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 5
Default value: 10
Accept pipeline input: False
Accept wildcard characters: False
```

### -OutputPath
Path to save the configuration as a PowerShell script file (.ps1) that can be dot-sourced later.
The file will contain a $Config variable with the configuration hashtable that can be easily
edited and reused.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 6
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -PassThru
When used with OutputPath, returns the configuration object in addition to saving it to a file.
Without this switch, only the file path is returned when OutputPath is specified.

```yaml
Type: SwitchParameter
Parameter Sets: (All)
Aliases:

Required: False
Position: Named
Default value: False
Accept pipeline input: False
Accept wildcard characters: False
```

### -ProgressAction
{{ Fill ProgressAction Description }}

```yaml
Type: ActionPreference
Parameter Sets: (All)
Aliases: proga

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### CommonParameters
This cmdlet supports the common parameters: -Debug, -ErrorAction, -ErrorVariable, -InformationAction, -InformationVariable, -OutVariable, -OutBuffer, -PipelineVariable, -Verbose, -WarningAction, and -WarningVariable. For more information, see [about_CommonParameters](http://go.microsoft.com/fwlink/?LinkID=113216).

## INPUTS

## OUTPUTS

### [hashtable] - Configuration structure with field options
## NOTES

## RELATED LINKS
